+++
author = "zenk"
slug = ""
tags = ["network"]
draft = true
categories=["cs"]
title="网络相关知识"
description="网络相关知识点。"
date="2019-04-30T19:18:23+08:00"

+++

### 网关

解决跨网段访问。

发包的目的地址和本机地址不在同一个网段的时候就会把包发给网关。网关把MAC头和IP头拿下来，根据IP地址和路由规则决定发往哪个结点。

网关一般是路由器。

#### 路由方式

**静态路由**

每个路由器配置跳转规则。它不修改IP地址，只修改MAC地址。

```
     192.168.1.1/24|====| 192.168.56.1/24    192.168.56.2/24 |====| 192.168.4.1/24
       +---------->| G1 |----------------------------------->| G2 |--------+
       |           |====|                                    |====|        |
       |                                                                   V
    |--+--|                                                             |--+--|
    |  A  | 192.168.1.101/24                                            |  B  | 192.168.4.101/24
    |--+--|                                                             |--+--|
```

A向B发消息的链路为：

A->G1->G2->B.

A->G1的地址内容：

> MAC源地址：A的MAC地址。
> MAC目的地址：G1中192.168.1.1网口的MAC地址。
> IP源地址：192.168.1.101。
> IP目的地址：192.168.4.101。

G1->G2的地址内容：

> MAC源地址：G1中192.168.56.1网口的地址。
> MAC目的地址：G2中192.168.56.2网口的地址。
> IP源地址：192.168.1.101。
> IP目的地址：192.168.4.101。

G2->B的地址内容：

> MAC源地址：G2中192.168.4.1网口的地址。
> MAC目的地址：B的MAC地址。
> IP源地址：192.168.1.101。
> IP目的地址：192.168.4.101。

**动态路由**

